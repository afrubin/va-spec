$schema: http://json-schema.org/draft/2020-12/schema
title: CVC-MetaKB-Annotation-Definitions
type: object
strict: true

imports:
  gks.core: core-source.yaml
  vrs: vrs-source.yaml
  catvars: catvars-source.yaml
  vod: vod-source.yaml

namespaces:
  gks.core: core.json#/$defs/
  vod: vod.json#/definitions/
  catvars: catvars.json#/$defs/

$defs:
  InformationEntity:
    inherits: gks.core:ExtensibleEntity
    description: >-
      InformationEntities are abstract (non-physical) entities that are about something (i.e. they carry 
      information about things in the real world).
    heritable_properties:
      description:
        type: string
        description: >-
          A free-text description of the InformationEntity.
      confidence_level:
        $ref_curie: gks.core:Coding
        description: >-
          A term describing the degree of confidence held by the creator 
          of the information entity, that the information it represents is true 
          (e.g. 'high confidence', 'likely true')
      confidence_score:
        $ref: "#/$defs/DataItem"
        description: >-
          A quantitative score reflecting the degree of confidence that the information 
          the information entity represents is true.
      specified_by:
        $ref: "#/$defs/Method"
        description: >-
          A :ref:`Method` that describes all or part of the process through which the information was
          generated.
      contribution:
        type: array
        ordered: true
        items:
          $ref: "#/$defs/Contribution"
      is_reported_in:
        type: array
        ordered: false
        items:
          $ref: "#/$defs/Document"
        description: A document in which the information content is expressed.
      record_metadata:
        $ref_curie: gks.core:RecordMetadata
    heritable_required: [ "id" ]

  Contribution:
    inherits: gks.core:ExtensibleEntity
    description: >-
      The sum of all actions taken by a single agent in contributing to the creation, modification, 
      assessment, or deprecation of a particular entity (e.g. a Statement, EvidenceLine, DataItem, 
      Publication, etc.)
    properties:
      type:
        type: string
        const: Contribution
        default: Contribution
        description: MUST be "Contribution".
      contribution_made_by:
        $ref: "#/$defs/Agent"
      started:
        type: string
        format: date
      ended:
        type: string
        format: date
      contributor_role:
        type: string

  Agent:
    inherits: gks.core:ExtensibleEntity
    description: >-
      An autonomous actor (person, organization, or computational agent) that bears some form
      of responsibility for an activity taking place, for the existence of an entity, or for 
      another agent’s activity.
    properties:
      type:
        type: string
        const: Agent
        default: Agent
        description: MUST be "Agent".
      name:
        type: string
      agent_type: 
        type: string
        enum: [ "person", "organization", "software agent" ]

  Method:
    inherits: gks.core:ExtensibleEntity
    description: >-
      A set of instructions that specify how to achieve some objective (e.g. experimental protocols, 
      curation guidelines, rule sets, etc.)
    properties:
      type:
        type: string
        const: Method
        default: Method
        description: MUST be "Method".
      is_reported_in:
        $ref_curie: gks.core:CURIE
      method_type:
        type: string
        description: >-
          A more specific type of entity the method represents (e.g. Variant Interpretation Guideline, 
          Experimental Protocol)

  Statement:
    inherits: InformationEntity
    description: >-
      A Statement (aka ‘Assertion’) represents a claim of purported truth as made by a particular agent, 
      on a particular occasion.
    heritable_properties:
      target_proposition:
        $ref: "#/$defs/Proposition"
        description: The Proposition about which the Statement is made.
      conclusion:
        $ref_curie: gks.core:Coding
        description: >-
          A term that describes a final conclusion about the Statement's subject, based on the statement 
          proposition, confidence level, and/or evidence direction and strength assessments.  
      evidence_direction:
        type: string
        enum: [ "supports", "uncertain", "disputes" ]
        description: >-
          The direction of this statement with respect to the target proposition.
       evidence_strength: 
         $ref_curie: gks.core:Coding
         description: A term indicating the overall strength of evidence in the direction reported by 
         the evidence_direction attribute. 

  VariationStatement:
    inherits: Statement
    description: >-
      A :ref:`Statement` describing the impact of a variation.
    heritable_properties:
      subject_descriptor:
        $ref_curie: vod:CategoricalVariationDescriptor
        description: >-
          A descriptor characterizing the variation impacting the condition.
      variation_origin:
        type: string
        enum: [ "germline", "somatic" ]
        description: >-
          A representation of whether the subject variation is inherited (germline) or
          acquired (somatic).

  VariationConditionStatement:
    inherits: VariationStatement
    description: >-
      A :ref:`Statement` describing the impact of a variation on a condition.
    heritable_properties:
      object_descriptor:
        $ref_curie: vod:ConditionDescriptor
        description: >-
          A descriptor characterizing the condition impacted by the variation.

  VariationGermlineConditionStatement:
    inherits: VariationConditionStatement
    description: >-
      A :ref:`Statement` describing the role of a variation in causing or protecting
      against a germline Condition.
    properties:
      type:
        type: string
        const: "VariationGermlineConditionStatement"
        default: "VariationGermlineConditionStatement"
        description: >-
          MUST be "VariationPathogenicityStatement".
      classification:
        extends: conclusion
      target_proposition:
        extends: target_proposition
        $ref: "#/$defs/VariationGermlineConditionProposition"

  Proposition:
    inherits: gks.core:ValueEntity
    description: >-
      An abstract :ref:`ValueEntity` representing the shareable meaning that can be 
      put forth as true or false by a Statement.
    heritable_properties:
      subject:
        $ref: gks.core:ValueEntity
        description: >-
          The :ref:`ValueEntity` about which the Proposition is made.
      predicate:
        type: string
        description: >-
          The relationship asserted to hold between the subject and the object of the 
          Proposition.
      object:
        $ref_curie: gks.core:ValueEntity
        description: >-
          A ValueEntity that is related to the subject of a Proposition via its predicate.
    required: [ "subject", "predicate", "object" ]

  VariationProposition:
    inherits: Proposition
    description: A proposition describing the role of a variation subject.
    heritable_properties:
      subject:
        description: >-
          The `Variation` about which the Proposition is made.
        oneOf:
        - $ref_curie: catvars:CategoricalVariation
        - $ref_curie: gks.core:CURIE

  VariationGermlineConditionProposition:
    inherits: VariationProposition
    description: >-
      A proposition describing the role of a variation in causing or preventing
      a germline disease condition.
    properties:
      type:
        type: string
        const: VariationGermlineConditionProposition
        default: VariationGermlineConditionProposition
        description: MUST be "VariationGermlineConditionProposition"
      predicate:
        type: string
        description: >-
          The relationship asserted to hold between the variation (subject) and 
          the condition (object) of the Proposition.
        enum:
        - causes_mendelian_condition
        - increases_risk_for_condition
        - decreases_risk_for_condition
      object:
        extends: object
        oneOf:
        - $ref_curie: gks.core:Condition
        - $ref_curie: gks.core:Disease
        - $ref_curie: gks.core:Phenotype

  VariationNeoplasmProposition:
    inherits: VariationProposition
    description: >-
      A proposition regarding the effect of variation within a neoplasm.
    heritable_properties:
      neoplasm_type_qualifier:
        description: >-
          The neoplasm for which the presence of the indicated variation is relevant.
        oneOf:
        - $ref_curie: gks.core:Condition
        - $ref_curie: gks.core:Disease
        - $ref_curie: gks.core:Phenotype

  VariationNeoplasmTherapeuticResponseProposition:
    inherits: VariationNeoplasmProposition
    description: >-
      A proposition describing the role of a variation in modulating the response of a
      neoplasm to one or more therapeutics.
    properties:
      object:
        description: >-
          The therapeutic to which the neoplasm response is modulated in the presence of the
          `subject` variation.
        oneOf:
        - $ref_curie: gks.core:Therapeutic
        - $ref_curie: gks.core:SubstituteTherapeutics
        - $ref_curie: gks.core:CombinationTherapeutics
